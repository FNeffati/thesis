{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import\"../styling/Twitter.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Twitter(_ref){let{timeFrame,County,AccountType,onTweetsFetched}=_ref;const[tweets,setTweets]=useState([]);const fetchTweets=()=>{fetch('http://127.0.0.1:5000/get_tweets',{'method':'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify([timeFrame,County,AccountType])}).then(response=>response.json()).then(data=>{setTweets(data);onTweetsFetched(data);}).catch(error=>console.error(error));};useEffect(()=>{fetchTweets();},[timeFrame,County,AccountType]);const[searchTerm,setSearchTerm]=useState('');const highlightText=(text,term)=>{const regex=new RegExp(term,'gi');return text.replace(regex,match=>\"<span class=\\\"highlight\\\">\".concat(match,\"</span>\"));};const filteredTweets=tweets.filter(tweet=>tweet.text.toLowerCase().includes(searchTerm.toLowerCase()));const[currentPage,setCurrentPage]=useState(1);const[tweetsPerPage]=useState(10);// Adjust the number of tweets per page as needed\nconst indexOfLastTweet=currentPage*tweetsPerPage;const indexOfFirstTweet=indexOfLastTweet-tweetsPerPage;const currentTweets=filteredTweets.slice(indexOfFirstTweet,indexOfLastTweet);const totalPages=Math.ceil(filteredTweets.length/tweetsPerPage);const formatDate=dateObj=>{let isoDateString;if(typeof dateObj==='object'&&dateObj.hasOwnProperty('$date')){isoDateString=dateObj['$date'];}else{isoDateString=dateObj;}const date=new Date(isoDateString);if(isNaN(date.getTime())){console.error(\"Invalid Date:\",isoDateString);return\"Invalid Date\";}return date.toLocaleDateString(\"en-US\",{year:'numeric',month:'long',day:'numeric'});};return/*#__PURE__*/_jsxs(\"div\",{className:\"twitter_container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"tweets_header\",children:/*#__PURE__*/_jsx(\"input\",{className:\"tweet_search_bar\",type:\"text\",placeholder:\"Filter tweets\",value:searchTerm,onChange:e=>setSearchTerm(e.target.value)})}),/*#__PURE__*/_jsx(\"div\",{className:\"tweets_container\",children:/*#__PURE__*/_jsx(\"ul\",{children:Array.isArray(currentTweets)&&currentTweets.length>0?currentTweets.map(tweet=>/*#__PURE__*/_jsxs(\"div\",{className:\"tweet\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"tweet_top\",children:[/*#__PURE__*/_jsx(\"img\",{src:tweet.image,alt:\"#\",className:\"profile_image\"}),/*#__PURE__*/_jsxs(\"a\",{className:\"username\",href:\"http://www.x.com/\"+tweet.username,children:[\"@\",tweet.username]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"tweet_mid\",children:/*#__PURE__*/_jsx(\"p\",{className:\"tweet_text\",dangerouslySetInnerHTML:{__html:highlightText(tweet.text,searchTerm)}})}),/*#__PURE__*/_jsxs(\"div\",{className:\"tweet_bottom\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"tweet_time\",children:formatDate(tweet.time)}),/*#__PURE__*/_jsx(\"p\",{className:\"tweet_location\",children:tweet.location})]})]})):/*#__PURE__*/_jsx(\"div\",{className:\"tweet_mid\",children:/*#__PURE__*/_jsx(\"p\",{className:\"no_match\",children:\"No Tweets match your filters.\"})})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"pagination\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setCurrentPage(currentPage-1),disabled:currentPage===1,children:\"Previous\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"Page \",currentPage,\" of \",totalPages]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setCurrentPage(currentPage+1),disabled:currentPage===totalPages,children:\"Next\"})]})]});}export default Twitter;","map":{"version":3,"names":["React","useEffect","useState","jsx","_jsx","jsxs","_jsxs","Twitter","_ref","timeFrame","County","AccountType","onTweetsFetched","tweets","setTweets","fetchTweets","fetch","headers","body","JSON","stringify","then","response","json","data","catch","error","console","searchTerm","setSearchTerm","highlightText","text","term","regex","RegExp","replace","match","concat","filteredTweets","filter","tweet","toLowerCase","includes","currentPage","setCurrentPage","tweetsPerPage","indexOfLastTweet","indexOfFirstTweet","currentTweets","slice","totalPages","Math","ceil","length","formatDate","dateObj","isoDateString","hasOwnProperty","date","Date","isNaN","getTime","toLocaleDateString","year","month","day","className","children","type","placeholder","value","onChange","e","target","Array","isArray","map","src","image","alt","href","username","dangerouslySetInnerHTML","__html","time","location","onClick","disabled"],"sources":["/Users/fneffati/Documents/Classes/Thesis/tbenvdash/src/components/Twitter.js"],"sourcesContent":["import React, {useEffect, useState} from \"react\";\nimport \"../styling/Twitter.css\"\n\n\nfunction Twitter({timeFrame, County, AccountType, onTweetsFetched}) {\n    const [tweets, setTweets] = useState([]);\n\n    const fetchTweets = () => {\n        fetch('http://127.0.0.1:5000/get_tweets',\n            {\n                'method':'POST',\n                headers : {\n                    'Content-Type':'application/json'\n                },\n                body: JSON.stringify([timeFrame, County, AccountType])\n            })\n            .then((response) => response.json())\n            .then((data) => {\n                setTweets(data);\n                onTweetsFetched(data);\n            })\n            .catch((error) => console.error(error));\n    };\n\n    useEffect(() => {\n        fetchTweets();\n    }, [timeFrame, County, AccountType]);\n\n\n    const [searchTerm, setSearchTerm] = useState('');\n\n    const highlightText = (text, term) => {\n        const regex = new RegExp(term, 'gi');\n        return text.replace(regex, (match) => `<span class=\"highlight\">${match}</span>`);\n    };\n\n    const filteredTweets = tweets.filter((tweet) =>\n        tweet.text.toLowerCase().includes(searchTerm.toLowerCase())\n    );\n\n    const [currentPage, setCurrentPage] = useState(1);\n    const [tweetsPerPage] = useState(10); // Adjust the number of tweets per page as needed\n\n    const indexOfLastTweet = currentPage * tweetsPerPage;\n    const indexOfFirstTweet = indexOfLastTweet - tweetsPerPage;\n    const currentTweets = filteredTweets.slice(indexOfFirstTweet, indexOfLastTweet);\n    const totalPages = Math.ceil(filteredTweets.length / tweetsPerPage);\n\n\n    const formatDate = (dateObj) => {\n        let isoDateString;\n        if (typeof dateObj === 'object' && dateObj.hasOwnProperty('$date')) {\n            isoDateString = dateObj['$date'];\n        } else {\n            isoDateString = dateObj;\n        }\n\n        const date = new Date(isoDateString);\n        if (isNaN(date.getTime())) {\n            console.error(\"Invalid Date:\", isoDateString);\n            return \"Invalid Date\";\n        }\n\n        return date.toLocaleDateString(\"en-US\", {\n            year: 'numeric',\n            month: 'long',\n            day: 'numeric'\n        });\n    };\n    return(\n        <div className=\"twitter_container\">\n            <div className=\"tweets_header\">\n                <input\n                    className=\"tweet_search_bar\"\n                    type=\"text\"\n                    placeholder=\"Filter tweets\"\n                    value={searchTerm}\n                    onChange={(e) => setSearchTerm(e.target.value)}\n                />\n            </div>\n\n            <div className=\"tweets_container\">\n                <ul>\n                    {Array.isArray(currentTweets) && currentTweets.length > 0 ? (\n                        currentTweets.map((tweet) => (\n                            <div className=\"tweet\">\n\n                                <div className=\"tweet_top\">\n                                    <img\n                                        src={tweet.image}\n                                        alt={\"#\"}\n                                        className=\"profile_image\"\n                                    />\n                                    <a className=\"username\" href={\"http://www.x.com/\" + tweet.username}>@{tweet.username}</a>\n                                </div>\n\n                                <div className=\"tweet_mid\">\n                                    <p\n                                        className=\"tweet_text\"\n                                        dangerouslySetInnerHTML={{\n                                            __html: highlightText(tweet.text, searchTerm),\n                                        }}\n                                    ></p>\n                                </div>\n\n                                <div className=\"tweet_bottom\">\n                                    <p className=\"tweet_time\">{formatDate(tweet.time)}</p>\n                                    <p className=\"tweet_location\">{tweet.location}</p>\n                                </div>\n\n                            </div>\n                        ))\n                    ) : (\n                        <div className=\"tweet_mid\">\n                            <p className=\"no_match\">No Tweets match your filters.</p>\n                        </div>\n                    )}\n                </ul>\n            </div>\n            <div className=\"pagination\">\n                <button onClick={() => setCurrentPage(currentPage - 1)} disabled={currentPage === 1}>\n                    Previous\n                </button>\n                <span>Page {currentPage} of {totalPages}</span>\n                <button onClick={() => setCurrentPage(currentPage + 1)} disabled={currentPage === totalPages}>\n                    Next\n                </button>\n            </div>\n        </div>\n    )\n}\n\nexport default Twitter;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}