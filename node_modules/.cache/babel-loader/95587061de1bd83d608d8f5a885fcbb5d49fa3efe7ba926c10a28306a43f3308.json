{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import\"../styling/Twitter.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Twitter(_ref){let{timeFrame,County,AccountTypeList,onTweetsFetched,onDateRangeFetched}=_ref;const[tweets,setTweets]=useState([]);const[currentPage,setCurrentPage]=useState(1);const fetchTweets=()=>{fetch('/get_tweets',{'method':'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify([timeFrame,County,AccountTypeList])}).then(response=>response.json()).then(data=>{setTweets(data);onTweetsFetched(data);setCurrentPage(1);if(data.length>0){const dates=data.map(tweet=>new Date(tweet.time.$date));// Assuming 'time' is the date field\nconst minDate=new Date(Math.min(...dates));const maxDate=new Date(Math.max(...dates));onDateRangeFetched(minDate,maxDate);}}).catch(error=>console.error(error));};useEffect(()=>{fetchTweets();},[timeFrame,County,AccountTypeList]);const[searchTerm,setSearchTerm]=useState('');const highlightText=(text,term)=>{const regex=new RegExp(term,'gi');return text.replace(regex,match=>\"<span class=\\\"highlight\\\">\".concat(match,\"</span>\"));};const filteredTweets=tweets.filter(tweet=>tweet.text.toLowerCase().includes(searchTerm.toLowerCase()));const[tweetsPerPage]=useState(10);// Adjust the number of tweets per page as needed\nconst indexOfLastTweet=currentPage*tweetsPerPage;const indexOfFirstTweet=indexOfLastTweet-tweetsPerPage;const currentTweets=filteredTweets.slice(indexOfFirstTweet,indexOfLastTweet);const totalPages=Math.ceil(filteredTweets.length/tweetsPerPage);const formatDate=dateObj=>{let isoDateString;if(typeof dateObj==='object'&&dateObj.hasOwnProperty('$date')){isoDateString=dateObj['$date'];}else{isoDateString=dateObj;}const date=new Date(isoDateString);if(isNaN(date.getTime())){console.error(\"Invalid Date:\",isoDateString);return\"Invalid Date\";}return date.toLocaleDateString(\"en-US\",{year:'numeric',month:'long',day:'numeric'});};return/*#__PURE__*/_jsxs(\"div\",{className:\"twitter_container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"tweets_header\",children:/*#__PURE__*/_jsx(\"input\",{className:\"tweet_search_bar\",type:\"text\",placeholder:\"Filter tweets\",value:searchTerm,onChange:e=>setSearchTerm(e.target.value)})}),/*#__PURE__*/_jsx(\"div\",{className:\"tweets_container\",children:/*#__PURE__*/_jsx(\"ul\",{children:Array.isArray(currentTweets)&&currentTweets.length>0?currentTweets.map(tweet=>/*#__PURE__*/_jsxs(\"div\",{className:\"tweet\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"tweet_top\",children:[/*#__PURE__*/_jsx(\"img\",{src:tweet.image,alt:\"#\",className:\"profile_image\"}),/*#__PURE__*/_jsxs(\"a\",{className:\"username\",href:\"http://www.x.com/\"+tweet.username,children:[\"@\",tweet.username]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"tweet_mid\",children:/*#__PURE__*/_jsx(\"p\",{className:\"tweet_text\",dangerouslySetInnerHTML:{__html:highlightText(tweet.text,searchTerm)}})}),/*#__PURE__*/_jsxs(\"div\",{className:\"tweet_bottom\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"tweet_time\",children:formatDate(tweet.time)}),/*#__PURE__*/_jsx(\"p\",{className:\"tweet_location\",children:tweet.location})]})]})):/*#__PURE__*/_jsx(\"div\",{className:\"tweet_mid\",children:/*#__PURE__*/_jsx(\"p\",{className:\"no_match\",children:\"No Tweets match your filters.\"})})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"pagination\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setCurrentPage(currentPage-1),disabled:currentPage===1,children:\"Previous\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"Page \",currentPage,\" of \",totalPages]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setCurrentPage(currentPage+1),disabled:currentPage===totalPages,children:\"Next\"})]})]});}export default Twitter;","map":{"version":3,"names":["React","useEffect","useState","jsx","_jsx","jsxs","_jsxs","Twitter","_ref","timeFrame","County","AccountTypeList","onTweetsFetched","onDateRangeFetched","tweets","setTweets","currentPage","setCurrentPage","fetchTweets","fetch","headers","body","JSON","stringify","then","response","json","data","length","dates","map","tweet","Date","time","$date","minDate","Math","min","maxDate","max","catch","error","console","searchTerm","setSearchTerm","highlightText","text","term","regex","RegExp","replace","match","concat","filteredTweets","filter","toLowerCase","includes","tweetsPerPage","indexOfLastTweet","indexOfFirstTweet","currentTweets","slice","totalPages","ceil","formatDate","dateObj","isoDateString","hasOwnProperty","date","isNaN","getTime","toLocaleDateString","year","month","day","className","children","type","placeholder","value","onChange","e","target","Array","isArray","src","image","alt","href","username","dangerouslySetInnerHTML","__html","location","onClick","disabled"],"sources":["/Users/fneffati/Documents/Classes/Thesis/tbenvdash/src/components/Twitter.js"],"sourcesContent":["import React, {useEffect, useState} from \"react\";\nimport \"../styling/Twitter.css\"\n\n\nfunction Twitter({timeFrame, County, AccountTypeList, onTweetsFetched, onDateRangeFetched}) {\n    const [tweets, setTweets] = useState([]);\n    const [currentPage, setCurrentPage] = useState(1);\n\n    const fetchTweets = () => {\n\n        fetch('/get_tweets',\n            {\n                'method':'POST',\n                headers : {\n                    'Content-Type':'application/json'\n                },\n                body: JSON.stringify([timeFrame, County, AccountTypeList])\n            })\n            .then((response) => response.json())\n            .then((data) => {\n                setTweets(data);\n                onTweetsFetched(data);\n                setCurrentPage(1);\n\n                if (data.length > 0) {\n                    const dates = data.map(tweet => new Date(tweet.time.$date)); // Assuming 'time' is the date field\n                    const minDate = new Date(Math.min(...dates));\n                    const maxDate = new Date(Math.max(...dates));\n                    onDateRangeFetched(minDate, maxDate);\n                }\n            })\n            .catch((error) => console.error(error));\n    };\n\n    useEffect(() => {\n        fetchTweets();\n    }, [timeFrame, County, AccountTypeList]);\n\n\n    const [searchTerm, setSearchTerm] = useState('');\n\n    const highlightText = (text, term) => {\n        const regex = new RegExp(term, 'gi');\n        return text.replace(regex, (match) => `<span class=\"highlight\">${match}</span>`);\n    };\n\n    const filteredTweets = tweets.filter((tweet) =>\n        tweet.text.toLowerCase().includes(searchTerm.toLowerCase())\n    );\n\n    const [tweetsPerPage] = useState(10); // Adjust the number of tweets per page as needed\n\n    const indexOfLastTweet = currentPage * tweetsPerPage;\n    const indexOfFirstTweet = indexOfLastTweet - tweetsPerPage;\n    const currentTweets = filteredTweets.slice(indexOfFirstTweet, indexOfLastTweet);\n    const totalPages = Math.ceil(filteredTweets.length / tweetsPerPage);\n\n\n    const formatDate = (dateObj) => {\n        let isoDateString;\n        if (typeof dateObj === 'object' && dateObj.hasOwnProperty('$date')) {\n            isoDateString = dateObj['$date'];\n        } else {\n            isoDateString = dateObj;\n        }\n\n        const date = new Date(isoDateString);\n        if (isNaN(date.getTime())) {\n            console.error(\"Invalid Date:\", isoDateString);\n            return \"Invalid Date\";\n        }\n\n        return date.toLocaleDateString(\"en-US\", {\n            year: 'numeric',\n            month: 'long',\n            day: 'numeric'\n        });\n    };\n\n\n    return(\n        <div className=\"twitter_container\">\n            <div className=\"tweets_header\">\n                <input\n                    className=\"tweet_search_bar\"\n                    type=\"text\"\n                    placeholder=\"Filter tweets\"\n                    value={searchTerm}\n                    onChange={(e) => setSearchTerm(e.target.value)}\n                />\n            </div>\n\n            <div className=\"tweets_container\">\n                <ul>\n                    {Array.isArray(currentTweets) && currentTweets.length > 0 ? (\n                        currentTweets.map((tweet) => (\n                            <div className=\"tweet\">\n                                <div className=\"tweet_top\">\n                                    <img\n                                        src={tweet.image}\n                                        alt={\"#\"}\n                                        className=\"profile_image\"\n                                    />\n                                    <a className=\"username\" href={\"http://www.x.com/\" + tweet.username}>@{tweet.username}</a>\n                                </div>\n\n                                <div className=\"tweet_mid\">\n                                    <p\n                                        className=\"tweet_text\"\n                                        dangerouslySetInnerHTML={{\n                                            __html: highlightText(tweet.text, searchTerm),\n                                        }}\n                                    ></p>\n                                </div>\n\n                                <div className=\"tweet_bottom\">\n                                    <p className=\"tweet_time\">{formatDate(tweet.time)}</p>\n                                    <p className=\"tweet_location\">{tweet.location}</p>\n                                </div>\n\n                            </div>\n                        ))\n                    ) : (\n                        <div className=\"tweet_mid\">\n                            <p className=\"no_match\">No Tweets match your filters.</p>\n                        </div>\n                    )}\n                </ul>\n            </div>\n            <div className=\"pagination\">\n                <button onClick={() => setCurrentPage(currentPage - 1)} disabled={currentPage === 1}>\n                    Previous\n                </button>\n                <span>Page {currentPage} of {totalPages}</span>\n                <button onClick={() => setCurrentPage(currentPage + 1)} disabled={currentPage === totalPages}>\n                    Next\n                </button>\n            </div>\n        </div>\n    )\n}\n\nexport default Twitter;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}